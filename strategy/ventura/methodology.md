# 稼働率推定方法論と限界

**作成日**: 2025年12月23日
**目的**: VN開発者の稼働率推定の方法論、限界、改善案を明確化
**前提**: Git log、GitHub PR APIに基づく推定（タイムシートは未取得）

---

## エグゼクティブサマリー

**結論**: 現在の稼働率推定は**あくまで相対的な比較指標**であり、**実際の工数は不明**。

**推定方法の限界**:
- ❌ 実際の作業時間は測定できていない
- ❌ レビュー、設計、会議等の非コード活動は含まれない
- ❌ コミット数と実作業時間の相関は保証されない
- ⚠️ Git logの記録方法による偏りがある可能性

**推奨される改善策**:
1. **Ventura社にタイムシート提出を要求**（実働時間の証明）
2. **月次報告の義務化**（タスク別工数、稼働日数）
3. **工数管理ツールの導入**（Jira等での見積もりvs実績）

---

## 1. 現在の稼働率推定方法

### 1.1 コミット数ベースの推定

**基本的な考え方**:
```
稼働率 = (対象開発者のコミット数 ÷ 基準開発者のコミット数) × 100%

基準: Lan Le（年間1,850コミット）を「フル稼働（100%）」とする
例: Phuc Danh（年間255コミット） → 255 ÷ 1,850 ≒ 14%
```

**この方法の前提**:
1. Lan Leがフル稼働（月160時間、年間約1,920時間）していると仮定
2. コミット数は作業量と相関すると仮定
3. 他の開発者もLan Leと同じ「1コミットあたりの工数」と仮定

### 1.2 この方法の問題点

#### 問題1: 実際の作業時間は不明

- ❌ 「1コミット = 1時間」という根拠はない
- ❌ 大規模リファクタリング: 1コミットで10時間以上かかる場合も
- ❌ 小さなバグ修正: 1コミットで10分で終わる場合も

**例**:
- Lan Leの大規模リファクタリング（470行削除 → 44行作成）
  - コミット数: 1
  - 推定作業時間: 数日（設計含む）
- Linh NguyenのPR #3972（+2,175行）
  - Git logでは: 1コミット（+6行）
  - 実際: +2,175行の実装
  - 推定作業時間: 1〜2週間？

#### 問題2: 非コード活動を含まない

**測定できていない活動**:
- コードレビュー（GitHub上でのコメント）
- 設計・アーキテクチャレビュー
- コミュニケーション（Slack、メール、ミーティング）
- 調査・学習
- 手動テスト

**例**:
- Man Ho: 直近3ヶ月で14コミット、しかしPR 40件マージ
  - PRマージ・レビュー活動が主
  - コミット数だけでは評価できない

#### 問題3: Git log統計とPR統計の乖離

**Linh Nguyenの例**:
- Git log（直近3ヶ月）: 1コミット（+6行）
- PR #3972: +2,175行
- 年間Git log: 223コミット
- **大きな矛盾**

**推測される原因**:
- Squash mergeの使用（複数コミットを1つにまとめる）
- リベースによるコミット履歴の書き換え
- 別ブランチでの開発が記録されていない

---

## 2. より正確な稼働率の測定方法

### 2.1 推奨方法: タイムシートベース

**必要なデータ**:
- 各開発者の日次タイムシート
- タスク別の工数記録
- 稼働日数の記録

**計算式**:
```
稼働率 = (実働時間 ÷ 契約時間) × 100%

例:
- 契約: 160時間/月（8時間×20営業日）
- 実働: 120時間/月
- 稼働率: 75%
```

**メリット**:
- ✅ 実際の作業時間を正確に測定
- ✅ タスク別の工数が分かる
- ✅ 法的証拠として使える

**Ventura社への要求内容**:
```
フォーマット例:
| 開発者 | 日付 | タスク | 工数（時間） | 備考 |
|--------|------|--------|-------------|------|
| Lan Le | 2025-12-01 | #3954 Recruit Sync | 8h | 実装 |
| Lan Le | 2025-12-02 | #3954 Recruit Sync | 6h | テスト |
| Lan Le | 2025-12-03 | コードレビュー | 2h | PR #3972 |
```

---

## 3. 現在の推定方法の妥当性検証

### 3.1 「Lan Le = フル稼働」の仮定は正しいか？

**検証: 月別推移から**

| 月 | コミット数 | 1日平均 | 推定稼働率 | 備考 |
|----|-----------|---------|-----------|------|
| 1月 | 430 | 21.5 | **200%** | ⚠️ 異常に多い（残業？バグ修正祭り？） |
| 4月 | 239 | 12.0 | 110% | やや多い |
| 7月 | 76 | 3.8 | 35% | 少ない（夏季休暇？） |
| 12月 | 36 | 1.8 | 17% | 極めて少ない（年末休暇？） |
| **平均** | **154** | **7.7** | **71%** | - |

**結論**:
- ✅ 年間平均では約71%稼働（まあまあフル稼働に近い）
- ⚠️ ただし、月によって大きく変動（17%〜200%）
- ⚠️ 「フル稼働」という仮定は正確ではない

**実際の稼働推定**:
- Lan Le: 年間約70〜80%稼働（推定）
- 他の開発者: Lan Le比で計算 × 0.7〜0.8

### 3.2 再計算した実質稼働

| 開発者 | コミット数 | Lan Le比 | 補正後稼働（人月） | 名簿上 | 乖離 |
|--------|-----------|---------|------------------|---------|------|
| Man Ho | 1,962 | 106% | **9.5人月** | 12人月 | 79% |
| Lan Le | 1,850 | 100% | **9.0人月** | 12人月 | 75% |
| Phong Nguyen | 850 | 46% | 4.1人月 | 名簿外 | - |
| Viet Le | 753 | 41% | 3.7人月 | 0人月 | - |
| Diep Trinh | 471 | 25% | 2.3人月 | 12人月 | 19% |
| Phuc Danh | 255 | 14% | 1.3人月 | 12人月 | 11% |
| Linh Nguyen | 223 | 12% | 1.1人月 | 12人月 | 9% |
| Huy Nguyen | 166 | 9% | 0.8人月 | 12人月 | 7% |
| **合計** | - | - | **31.8人月** | **72人月** | **44%** |

**より現実的なコスト分析**:
- 年間支払額: 4,320万円
- 実質稼働: 約32人月（開発者のみ）
- 実質単価: **135万円/人月**

---

## 4. 推奨される改善策

### 4.1 即時実施（Ventura社への要求）

**タイムシート提出の要求**:
```
要求内容:
1. 2025年1月〜12月の全タイムシート
2. 日次の稼働時間記録
3. タスク別の工数記録
4. 稼働日数の証明
```

**月次報告の義務化**:
```
報告内容:
1. 月次の稼働日数
2. 主要タスクと工数
3. 完了したPR/チケット
4. 来月の予定
```

### 4.2 中期的実施（3ヶ月以内）

**工数管理ツールの導入**:
- Jira + Tempo（工数管理プラグイン）
- 見積もりvs実績の記録
- 自動レポート生成

**契約形態の変更**:
- 固定費 → 実働ベース契約
- 月次精算制度
- 透明性・公平性の向上

---

## 5. 結論

**現在の稼働率推定について**:

✅ **できること**:
- 相対的な比較（Man Ho > Lan Le > ...）
- トレンド分析（Q1 > Q2 > Q3 > Q4）
- 異常値の検出（Huy Nguyen: 極めて少ない）

❌ **できないこと**:
- 正確な稼働時間の測定
- 実質単価の正確な計算
- 法的証拠としての使用

**最終的な推奨**:
- Ventura社にタイムシート提出を要求（法的義務として）
- 実働ベース契約への移行
- 月次でのモニタリング継続

---

**レポート作成日**: 2025年12月23日
**作成者**: Claude (Anthropic)
